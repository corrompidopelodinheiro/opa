<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Loja</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>

body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: url('https://media.discordapp.net/attachments/1447097018068631574/1447321787338850376/img1.png?ex=693732f4&is=6935e174&hm=fbfd32e00d21a4440954a5d3af272535219ed8f44a9e5772e1e28eb2b6841bbb&=&format=webp&quality=lossless&width=1536&height=864') no-repeat center center fixed;
    background-size: cover;
}

header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #0b16ad;
    color: rgb(255, 255, 255);
    padding: 15px 40px;
    font-size: 22px;
    font-weight: bold;
}

.wrapper {
    display: flex;
    padding: 40px;
    gap: 40px;
}

.produtos {
    width: 70%;
    display: grid;
    grid-template-columns: repeat(2, 450px);
    justify-content: center;
    gap: 20px;
}

.card {
    background: rgb(35, 35, 35);
    padding: 10px;
    border-radius: 8px;
    border: 1.5px solid #161515;
    width: 391px;
    height: 300px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.06);

    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    text-align: center;

    animation: fadeSlide 0.4s ease forwards;
    transition: transform .2s, box-shadow .2s;
}

.card:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
}

.card h3 {
    margin: 0;
    font-size: 18px;
    color: #ffffff; /* título branco para contraste no fundo escuro */
}

.card p {
    margin-top: 4px;
    color: #6c6c6c;
    font-size: 13px;
}

.card b {
    margin: 10px 0;
    font-size: 20px;
    color: #ffffff;
}

.card button {
    background: #fcfcfc;
    color: black;
    width: 100%;
    border: none;
    padding: 12px;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
    display: flex;
    justify-content: center;
    gap: 8px;
    align-items: center;
    transition: background .25s, transform .2s;
}

.card button:hover {
    background: #8b8787;
    transform: scale(1.04);
}

/* CARRINHO */
.carrinho {
    width: 30%;
    background: white;
    padding: 25px;
    border-radius: 12px;
    border: 1.5px solid #e0e0e0;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
}

.carrinho h2 {
    margin: 0 0 20px 0;
    background: #0051ff;
    color: white;
    padding: 12px;
    border-radius: 10px;
    font-size: 20px;
}

.ds-title {
    font-size: 15px;
    font-weight: bold;
    color: #0051ff;
    margin-bottom: 12px;
    margin-top: 25px;
}

.desc-card {
    background: white;
    border: 1.5px solid #dcdcdc;
    border-radius: 12px;
    padding: 15px;
    margin-bottom: 12px;
    display: flex;
    gap: 12px;
    cursor: pointer;

    transition: transform .2s, box-shadow .2s;
}

.desc-card:hover {
    transform: scale(1.02);
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.desc-card.selected {
    border: 2px solid #ff3b3b;
    background: #fff4f4;
}

.desc-main {
    font-size: 15px;
    font-weight: bold;
}

.desc-sub {
    font-size: 13px;
    margin-top: 4px;
    color: #7a7a7a;
}

.carrinho button {
    margin-top: 25px;
    width: 100%;
    background: #d62828;
    color: white;
    padding: 14px;
    border: none;
    border-radius: 8px;
    font-size: 17px;
    cursor: pointer;

    transition: transform .25s, background .25s;
}

.carrinho button:hover:not(:disabled) {
    transform: scale(1.03);
    background: #b01f1f;
}

.carrinho button:disabled {
    background: #f5a5a5;
}

.toast {
    position: fixed;
    bottom: -80px;
    left: 50%;
    transform: translateX(-50%);
    background: #d10000;
    color: white;
    padding: 16px 26px;
    border-radius: 10px;
    font-size: 16px;
    transition: .4s;
    z-index: 5000;
}

.toast.show {
    bottom: 25px;
    animation: toastUp .45s ease;
}

#popup-bg, #popup-finalizar {
    display:none;
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.5);
    justify-content:center;
    align-items:center;
    z-index: 2000;
}

#popup, #popup-finalizar > div {
    background:white;
    padding:25px;
    width:330px;
    border-radius:12px;
    text-align:center;
    box-shadow:0 4px 20px rgba(0,0,0,0.3);
    animation: popupZoom .25s ease;
}

.qtd-box {
    display:flex;
    justify-content:center;
    align-items:center;
    gap:15px;
    margin:20px 0;
}

.qtd-box button {
    width:40px;
    height:40px;
    border:none;
    border-radius:6px;
    background:#d62828;
    color:white;
    font-size:22px;
    cursor:pointer;
}

.remove-btn {
    background: #d62828;
    border: none;
    border-radius: 4px;
    color: white;
    font-size: 14px;
    padding: 2px 6px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all .2s;
}

.remove-btn i {
    font-size: 12px;
}

.remove-btn:hover {
    background: #b01f1f;
}

input.popup-input {
    width: 90%;
    padding: 8px;
    margin: 6px auto;
    border-radius: 6px;
    border: 1px solid #ddd;
    display: block;
}

@keyframes fadeSlide {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes popupZoom {
    from { opacity: 0; transform: scale(0.85); }
    to { opacity: 1; transform: scale(1); }
}

@keyframes toastUp {
    from { bottom: -80px; opacity: 0; }
    to { bottom: 25px; opacity: 1; }
}

</style>
</head>
<body>

<header>
    Loja
    <div>
        <i class="fa fa-shopping-cart"></i> <span id="cartCount">0 itens</span>
    </div>
</header>

<div class="wrapper">

    <div class="produtos" id="listaProdutos"></div>

    <div class="carrinho">
        <h2><i class="fa fa-shopping-cart"></i> Resumo do Pedido</h2>

        <p id="vazioTexto">Seu carrinho está vazio.<br>Adicione itens para ver o cálculo.</p>

        <div class="ds-title">Descontos e Parcerias</div>

        <label class="desc-card" onclick="setDesc(0)">
            <input type="radio" name="desc" value="0" checked>
            <div>
                <div class="desc-main">Sem desconto</div>
            </div>
        </label>

        <label class="desc-card" onclick="setDesc(5)">
            <input type="radio" name="desc" value="5">
            <div>
                <div class="desc-main">Desconto Promo</div>
                <div class="desc-sub">5% de desconto</div>
            </div>
        </label>

        <label class="desc-card" onclick="setDesc(10)">
            <input type="radio" name="desc" value="10">
            <div>
                <div class="desc-main">Parceria</div>
                <div class="desc-sub">10% de desconto</div>
            </div>
        </label>

        <hr style="margin: 20px 0; opacity: .3;">

        <p>Subtotal: <b id="subtotal">R$ 0,00</b></p>
        <p style="font-size: 22px; font-weight: bold;">Total <span id="total">R$ 0,00</span></p>

        <button id="finalizar" onclick="abrirFinalizar()" disabled>Finalizar Compra</button>
    </div>
</div>

<div class="toast" id="toast"></div>

<!-- POPUP ADICIONAR -->
<div id="popup-bg">
    <div id="popup">
        <h2 id="popupNome"></h2>
        <p id="popupPreco" style="font-size:18px; color:#666;"></p>

<div class="qtd-box">
    <button onclick="mudarQtd(-1)">-</button>
    <input id="popupQtdInput" type="number" min="1" value="1" 
           style="width:60px; text-align:center; font-size:18px; padding:6px 8px;
                  border-radius:8px; border:1px solid #ccc; background:#f2f2f2;
                  -moz-appearance: textfield; 
                  -webkit-appearance: none; 
                  margin: 0;">
    <button onclick="mudarQtd(1)">+</button>
</div>


        <button onclick="confirmarAdicionar()" style="width:100%; padding:12px; background:#d62828; color:white; font-size:16px; border:none; border-radius:8px;">
            Adicionar ao carrinho
        </button>
    </div>
</div>


<!-- POPUP FINALIZAR -->
<div id="popup-finalizar">
    <div>
        <h2>Finalizar Compra</h2>
        <input id="inputNome" class="popup-input" placeholder="Digite seu nome e ID">
        <input id="inputInfo" class="popup-input" placeholder="Telefone">
        <button onclick="confirmarFinalizar()" style="width:100%; padding:10px; background:#d62828; color:white; border:none; border-radius:6px;">Confirmar</button>
    </div>
</div>

<script>
const produtos = [
    { nome: "M1911", preco: 100000, desc: "Pistola clássica - Pistolas e SMGs", img: "https://docs.fivem.net/weapons/WEAPON_PISTOL.png" },
    { nome: "Five Seven", preco: 130000, desc: "Alta performance - Pistolas e SMGs", img: "https://docs.fivem.net/weapons/WEAPON_PISTOL_MK2.png" },
    { nome: "UZI", preco: 140000, desc: "SMG compacta - Pistolas e SMGs", img: "https://docs.fivem.net/weapons/WEAPON_MICROSMG.png" },
    { nome: "Skorpion V61", preco: 66000, desc: "Mobilidade alta - Pistolas e SMGs", img: "https://docs.fivem.net/weapons/WEAPON_MINISMG.png" },
    { nome: "Tec M31", preco: 170000, desc: "Pistola tática avançada- Pistolas e SMGs", img: "https://docs.fivem.net/weapons/WEAPON_TECPISTOL.png" },
    { nome: "Mossberg 500", preco: 550000, desc: "Escopeta de combate - Escopetas", img: "https://docs.fivem.net/weapons/WEAPON_PUMPSHOTGUN.png" },
    { nome: "G36C", preco: 550000, desc: "Fuzil de Assalto - Fuzis de Assalto", img: "https://docs.fivem.net/weapons/WEAPON_SPECIALCARBINE.png" },
    { nome: "AK-47", preco: 550000, desc: "Fuzil de Assalto - Fuzis de Assalto", img: "https://docs.fivem.net/weapons/WEAPON_ASSAULTRIFLE.png" },
    { nome: "G36C MK2", preco: 550000, desc: "Fuzil de Assalto - Fuzis de Assalto", img: "https://docs.fivem.net/weapons/WEAPON_SPECIALCARBINE_MK2.png" },
    { nome: "Mossberg 590", preco: 550000, desc: "Escopeta de combate - Escopetas", img: "https://docs.fivem.net/weapons/WEAPON_PUMPSHOTGUN_MK2.png" },
    { nome: "AWM Magnum", preco: 550000, desc: "Fuzil de Precisão - Fuzis de Precisão", img: "https://docs.fivem.net/weapons/WEAPON_SNIPERRIFLE.png" },
    { nome: "M249", preco: 550000, desc: "Metralhadora Pesada - Metralhadoras", img: "https://docs.fivem.net/weapons/WEAPON_COMBATMG_MK2.png" },
    { nome: "QBZ-65", preco: 550000, desc: "Fuzil de Assalto - Fuzis de Assalto", img: "https://docs.fivem.net/weapons/WEAPON_BULLPUPRIFLE_MK2.png" },
    { nome: "M16", preco: 550000, desc: "Fuzil de Assalto - Fuzis de Assalto", img: "https://docs.fivem.net/weapons/WEAPON_TACTICALRIFLE.png" },
    { nome: "Steyr AUG", preco: 550000, desc: "Fuzil de Assalto - Fuzis de Assalto", img: "https://docs.fivem.net/weapons/WEAPON_ADVANCEDRIFLE.png" },
    { nome: "MTAR-21", preco: 550000, desc: "Fuzil de Assalto - Fuzis de Assalto", img: "https://docs.fivem.net/weapons/WEAPON_MILITARYRIFLE.png" }
];

let tempNome="", tempPreco=0, tempQtd=1, carrinho=[], subtotal=0, desconto=0;

function formatar(v){return v.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});}

function gerar(){
    const area = document.getElementById("listaProdutos");
    area.innerHTML = "";
    produtos.forEach(p => {
        area.innerHTML += `
            <div class="card">
                <div style="text-align:center;">
                    <img src="${p.img}" alt="${p.nome}" style="width:100%; height:130px; object-fit:cover; border-radius:6px; margin-bottom:10px;">
                </div>
                <div>
                    <h3 style="color:white;">${p.nome}</h3>
                    <p style="color:#ccc;">${p.desc}</p>
                </div>
                <div>
                    <b style="color:#eee;">${formatar(p.preco)}</b>
                    <button onclick="abrirPopup('${p.nome}', ${p.preco})">
                        <i class="fa fa-shopping-cart"></i> Adicionar
                    </button>
                </div>
            </div>
        `;
    });
}
gerar();

function abrirPopup(nome, preco){
    tempNome = nome;
    tempPreco = preco;
    tempQtd = 1;

    document.getElementById("popupNome").innerText = nome;
    document.getElementById("popupPreco").innerText = formatar(preco);
    document.getElementById("popupQtdInput").value = 1;

    document.getElementById("popup-bg").style.display = "flex";
}
function mudarQtd(v){
    const input = document.getElementById("popupQtdInput");
    let val = Number(input.value) + v;
    if(val < 1) val = 1;
    input.value = val;
}

function confirmarAdicionar(){
    tempQtd = Number(document.getElementById("popupQtdInput").value);
    if(tempQtd < 1) tempQtd = 1;

    carrinho.push({nome: tempNome, preco: tempPreco, qtd: tempQtd});
    subtotal += tempPreco * tempQtd;
    atualizarCarrinho();
    document.getElementById("popup-bg").style.display = "none";
    toast(`${tempNome} (${tempQtd}x) adicionado ao carrinho`);
    document.getElementById("vazioTexto").style.display = "none";
    document.getElementById("finalizar").disabled = false;
}

function setDesc(v){
    desconto=v;
    document.querySelectorAll(".desc-card").forEach(card=>card.classList.remove("selected"));
    document.querySelector(`input[value="${v}"]`).parentElement.classList.add("selected");
    atualizarCarrinho();
}

function atualizarCarrinho(){
    const carrinhoDiv = document.querySelector(".carrinho");
    carrinhoDiv.querySelectorAll(".item-carrinho").forEach(el => el.remove());
    carrinho.forEach(item => {
        const div = document.createElement("div");
        div.className = "desc-card item-carrinho";

        div.innerHTML = `
            <div style="flex-grow:1;">
                <div class="desc-main">${item.nome}</div>
                <div class="desc-sub">${item.qtd}x — ${formatar(item.preco*item.qtd)}</div>
            </div>
            <button class="remove-btn" onclick="removerItem('${item.nome}')">
                <i class="fa fa-trash"></i>
            </button>
        `;
        carrinhoDiv.insertBefore(div, carrinhoDiv.querySelector("hr"));
    });

    const total=subtotal-(subtotal*desconto/100);
    document.getElementById("subtotal").innerText=formatar(subtotal);
    document.getElementById("total").innerText=formatar(total);
    atualizarContador();
}

function toast(msg){
    const t=document.getElementById("toast");
    t.innerText=msg;
    t.classList.add("show");
    setTimeout(()=>t.classList.remove("show"),2500);
}

function atualizarContador(){
    const qtdTotal = carrinho.reduce((acc, item) => acc + item.qtd, 0);
    document.getElementById("cartCount").innerText = qtdTotal === 1 ? "1 item" : `${qtdTotal} itens`;
}

function abrirFinalizar(){document.getElementById("popup-finalizar").style.display="flex";}

function confirmarFinalizar(){
    const nomeCliente=document.getElementById("inputNome").value||"Nome";
    const infoExtra=document.getElementById("inputInfo").value||"";

    let lista=carrinho.map(i=>`• ${i.nome} — ${i.qtd}x — ${formatar(i.preco*i.qtd)}`).join("\n");
    const total=subtotal-(subtotal*desconto/100);

    toast("Compra finalizada!");

    const webhookBody={
        content: "@here",
        username:"Loja",
        embeds:[{
            title:"Compra Finalizada",
            description:`Nome: ${nomeCliente}\nID e Telefone: ${infoExtra}`,
            color:16711680,
            fields:[
                {name:"Itens Comprados", value:lista},
                {name:"Subtotal", value:formatar(subtotal), inline:true},
                {name:"Desconto", value:desconto+"%", inline:true},
                {name:"Total Final", value:formatar(total)}
            ],
            timestamp:new Date().toISOString()
        }]
    };

    fetch("https://discord.com/api/webhooks/1447114066215698624/7G0WCATcCKgbJ4lo9aWlUACmn1LQ1ZgD_SqZLhP_KQahemBmgPv2YAzt8mqka69dmMor", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify(webhookBody)
    });

    carrinho=[]; subtotal=0; desconto=0;
    atualizarCarrinho();
    document.getElementById("popup-finalizar").style.display="none";
    document.getElementById("vazioTexto").style.display="block";
    document.getElementById("finalizar").disabled=true;
}

function removerItem(nome){
    const index=carrinho.findIndex(i=>i.nome===nome);
    if(index>-1){
        subtotal-=carrinho[index].preco*carrinho[index].qtd;
        carrinho.splice(index,1);
        atualizarCarrinho();
        toast(`${nome} removido do carrinho`);
        if(carrinho.length===0){
            document.getElementById("vazioTexto").style.display="block";
            document.getElementById("finalizar").disabled=true;
        }
    }
}
</script>

</body>
</html>
